<form [formGroup]="subContractorSearchForm">
  <div class="card">
    <div class="card-body">
      <div class="row">
        <div class="form-group col-sm-6">
          <label>Code</label>
          <input
            class="form-control"
            name="code"
            id="code"
            type="text"
            formControlName="codeList"
            style="width: 100%"
          />
        </div>
        <div class="form-group col-sm-6">
          <label>Status</label>
          <p-dropdown
            id="activeList"
            [options]="statusList"
            formControlName="activeList"
            dataKey="id"
            inputId="id"
            placeholder="Select Status"
            optionLabel="name"
            appendTo="body"
            [style]="{ width: '100%', height: '40px' }"
            showClear="true"
          >
          </p-dropdown>
        </div>
      </div>
      <div class="row">
        <div class="col-12">
          <button
            class="btn btn-primary btn-sm btm-space float-right"
            (click)="getSubContractor()"
          >
            Search
          </button>
        </div>
      </div>
    </div>
  </div>
</form>
<p-messages [(value)]="messages"></p-messages>

<cui-grid
  [values]="subContractorDTOList"
  [options]="subContractorOptions"
></cui-grid>

<p-dialog [(visible)]="subContractorDialogVisibilty" [width]="500">
  <p-header>
    Sub Contractor
  </p-header>
  <form [formGroup]="subContractorForm">
    <div class="form-group">
      <label for="name">Name</label>
      <input
        class="form-control"
        name="name"
        id="name"
        type="text"
        formControlName="name"
        style="width: 100%"
      />
      <div
        class="form-control-feedback"
        *ngIf="
          getControl('name').errors &&
          (getControl('name').dirty || getControl('name').touched)
        "
      >
        <p *ngIf="getControl('name').errors.required">
          Name is required
        </p>
      </div>
    </div>
    <div class="form-group">
      <label for="code">Code</label>
      <input
        class="form-control"
        name="code"
        id="code"
        type="text"
        formControlName="code"
        style="width: 100%"
      />
      <div
        class="form-control-feedback"
        *ngIf="
          getControl('code').errors &&
          (getControl('code').dirty || getControl('code').touched)
        "
      >
        <p *ngIf="getControl('code').errors.required">
          Code is required
        </p>
      </div>
    </div>
  </form>
  <p-footer>
    <div class="btn-toolbar">
      <button
        class="btn btn-sm btn-success"
        type="button"
        [disabled]="subContractorForm.invalid"
        (click)="saveSubContractor()"
      >
        <i class="pi pi-save">Save</i>
      </button>
      <button
        class="btn btn-sm btn-default"
        type="button"
        (click)="cancelSubContractor()"
      >
        <i class="pi pi-times">Cancel</i>
      </button>
    </div>
  </p-footer>
</p-dialog>

<p-dialog [(visible)]="financialDetailDialogVisibilty" [width]="500">
  <p-header>
    Finance Detail
  </p-header>
  <form [formGroup]="financialDetailForm">
    <div class="form-group">
      <label for="gst">GST</label>
      <input
        class="form-control"
        name="gst"
        id="gst"
        type="text"
        formControlName="gst"
        style="width: 100%"
      />
    </div>
    <div class="form-group">
      <label for="pan">PAN</label>
      <input
        class="form-control"
        name="pan"
        id="pan"
        type="text"
        formControlName="pan"
        style="width: 100%"
      />
    </div>
  </form>
  <p-footer>
    <div class="btn-toolbar">
      <button
        class="btn btn-sm btn-success"
        type="button"
        (click)="saveFinancialDetail()"
      >
        <i class="pi pi-save">Save</i>
      </button>
      <button
        class="btn btn-sm btn-default"
        type="button"
        (click)="cancelFinancialDetail()"
      >
        <i class="pi pi-times">Cancel</i>
      </button>
    </div>
  </p-footer>
</p-dialog>

<p-dialog [(visible)]="addressDialogVisibilty" [width]="500">
  <p-header>
    Address
  </p-header>
  <form [formGroup]="addressForm">
    <div class="form-group">
      <label for="addressLine1">Address Line</label>
      <input
        class="form-control"
        name="addressLine1"
        id="addressLine1"
        type="text"
        formControlName="addressLine1"
        style="width: 100%"
      />
      <input
        class="form-control"
        name="addressLine2"
        id="addressLine2"
        type="text"
        formControlName="addressLine2"
        style="width: 100%"
      />
    </div>
    <div class="form-group">
      <label for="landmark">Landmark</label>
      <input
        class="form-control"
        name="landmark"
        id="landmark"
        type="text"
        formControlName="landmark"
        style="width: 100%"
      />
    </div>
    <div class="form-group">
      <label for="city">City</label>
      <input
        class="form-control"
        name="city"
        id="city"
        type="text"
        formControlName="city"
        style="width: 100%"
      />
    </div>
    <div class="form-group">
      <label for="state">State</label>
      <input
        class="form-control"
        name="state"
        id="state"
        type="text"
        formControlName="state"
        style="width: 100%"
      />
    </div>
    <div class="form-group">
      <label for="country">Country</label>
      <input
        class="form-control"
        name="country"
        id="country"
        type="text"
        formControlName="country"
        style="width: 100%"
      />
    </div>
    <div class="form-group">
      <label for="pincode">Pincode</label>
      <input
        class="form-control"
        name="pincode"
        id="pincode"
        type="text"
        formControlName="pincode"
        style="width: 100%"
      />
    </div>
    <div class="form-group">
      <label for="mobNo">Mobile</label>
      <input
        class="form-control"
        name="mobNo"
        id="mobNo"
        type="text"
        formControlName="mobNo"
        style="width: 100%"
      />
    </div>
  </form>
  <p-footer>
    <div class="btn-toolbar">
      <button
        class="btn btn-sm btn-success"
        type="button"
        (click)="saveAddress()"
      >
        <i class="pi pi-save">Save</i>
      </button>
      <button
        class="btn btn-sm btn-default"
        type="button"
        (click)="cancelAddress()"
      >
        <i class="pi pi-times">Cancel</i>
      </button>
    </div>
  </p-footer>
</p-dialog>
